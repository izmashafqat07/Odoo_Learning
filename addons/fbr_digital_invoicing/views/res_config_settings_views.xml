<odoo>
    <record id="view_res_config_settings_fbr" model="ir.ui.view">
        <field name="name">res.config.settings.view.form.fbr</field>
        <field name="model">res.config.settings</field>
        <!-- Canonical form view for Odoo 17/18 -->
        <field name="inherit_id" ref="base.res_config_settings_view_form"/>
        <field name="arch" type="xml">
            <!-- Insert directly inside the <form> (more robust than targeting //sheet or div#settings) -->
            <xpath expr="//form" position="inside">
                <div class="app_settings_block" data-string="FBR Integration" string="FBR Integration">
                    <h2>FBR Digital Invoicing</h2>

                    <div class="row mt16">
                        <div class="col-12 col-lg-6">
                            <group>
                                <field name="fbr_enabled"/>
                                <field name="fbr_block_post_on_error"/>
                                <field name="fbr_environment"/>
                                <field name="fbr_timeout"/>
                            </group>
                        </div>
                        <div class="col-12 col-lg-6">
                            <group string="Credentials">
                                <field name="fbr_client_id"/>
                                <field name="fbr_client_secret"/>
                                <field name="fbr_api_key"/>
                                <field name="fbr_license_key"/>
                                <field name="fbr_pos_id"/>
                                <field name="fbr_registration_no"/>
                                <field name="fbr_buyer_required"/>
                            </group>
                        </div>
                    </div>

                    <h3>Endpoints</h3>
                    <group>
                        <group string="Sandbox">
                            <field name="fbr_auth_url_sandbox" class="oe_inline"/>
                            <field name="fbr_base_url_sandbox" class="oe_inline"/>
                        </group>
                        <group string="Production">
                            <field name="fbr_auth_url_production" class="oe_inline"/>
                            <field name="fbr_base_url_production" class="oe_inline"/>
                        </group>
                    </group>

                    <h3>Signing (optional)</h3>
                    <group>
                        <!-- XML-safe newline -->
                        <field name="fbr_private_key_pem" placeholder="-----BEGIN PRIVATE KEY-----&#10;..."/>
                        <field name="fbr_public_key_pem" placeholder="-----BEGIN PUBLIC KEY-----&#10;..."/>
                    </group>
                </div>
            </xpath>
        </field>
    </record>
</odoo>
