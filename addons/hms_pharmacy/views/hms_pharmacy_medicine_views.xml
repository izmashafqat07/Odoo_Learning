<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Tree view (product proxy filtered for medicines) -->
    <record id="view_hms_medicine_list" model="ir.ui.view">
        <field name="name">hms.medicine.list</field>
        <field name="model">product.product</field>
        <field name="arch" type="xml">
            <list>
                <field name="name"/>
                <field name="default_code"/>
                <field name="dosage"/>
                <field name="stock_quantity"/>
            </list>
        </field>
    </record>

    <!-- Form view: safely add a new page/tab under product notebook -->
    <record id="view_hms_medicine_form" model="ir.ui.view">
        <field name="name">hms.medicine.form</field>
        <field name="model">product.product</field>
        <field name="inherit_id" ref="product.product_normal_form_view"/>
        <field name="arch" type="xml">
            <!-- Insert a new page into the product form notebook (safe xpath) -->
            <xpath expr="//sheet/notebook" position="inside">
                <page string="Medicine Info" name="medicine_info_tab">
                    <group>
                        <field name="is_medicine"/>
                        <field name="dosage"/>
                        <field name="stock_quantity" readonly="1"/>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <!-- Action for Medicines (shows only products marked as medicine) -->
    <record id="action_hms_medicines" model="ir.actions.act_window">
        <field name="name">Medicines</field>
        <field name="res_model">product.product</field>
        <field name="view_mode">list,form</field>
        <field name="view_id" ref="view_hms_medicine_list"/>
        <field name="domain">[('is_medicine', '=', True)]</field>
    </record>
</odoo>
