<odoo>
  <!-- University Partner Form View -->
  <record id="view_university_partner_form" model="ir.ui.view">
    <field name="name">university.res.partner.form</field>
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="base.view_partner_form"/>
    <field name="priority">20</field>
    <field name="arch" type="xml">

      <!-- Replace the whole form BUT keep a proper <sheet> -->
      <xpath expr="//form" position="replace">
        <form string="University Partner">
          <header>
            <button name="action_open_user_form"
                    type="object"
                    string="Create User Account"
                    class="btn-primary"/>
          </header>

          <sheet>
            <!-- Basic partner info -->
            <group>
              <field name="name"/>
              <field name="partner_type"/> <!-- student / staff -->
              <field name="department_id"/> <!-- Common department field -->
            </group>

            <!-- Student fields (only when partner_type = student) -->
            <group string="Student Info" invisible="partner_type != 'student'">
              <group>
                <field name="enrollment_number"/>
                <field name="roll_number"/>
                <field name="program"/>
                <field name="batch"/>
                <field name="admission_date"/>
                <field name="date_of_birth"/>
              </group>
              <group>
                <field name="guardian_name"/>
                <field name="guardian_phone"/>
                <field name="semester"/>
                <field name="section"/>
                <field name="cgpa"/>
               
              </group>
            
              <group>
                
                <field name="student_status"/>
                
                <field name="emergency_contact"/>
              </group>
            </group>

            <!-- Staff fields (only when partner_type = staff) -->
            <group string="Staff Info" invisible="partner_type != 'staff'">
              <group>
                <field name="employee_id"/>
                <field name="designation"/>
                <field name="staff_type_id" options="{'no_create_edit': False}"/>
                <field name="hire_date"/>
                <field name="job_grade"/>
                <field name="contract_type"/>
              </group>
              <group string="Contact and Office">
                <field name="work_email"/>
                <field name="work_phone"/>
                <field name="office_room"/>
              </group>
              <group string="Academic">
                <field name="specialization"/>
                <field name="qualification"/>
                
                
              </group>
            </group>

          </sheet>
        </form>
      </xpath>

    </field>
  </record>

  <!-- Action Window (All Partners) -->
  <record id="action_university_partner" model="ir.actions.act_window">
    <field name="name">Users</field>
    <field name="res_model">res.partner</field>
    <field name="view_mode">list,form</field>
  </record>
</odoo>
